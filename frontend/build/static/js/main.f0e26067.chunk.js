(this["webpackJsonpreceipt-hero-frontend"]=this["webpackJsonpreceipt-hero-frontend"]||[]).push([[0],{537:function(e,t,n){"use strict";n.r(t);var a,c,r,s,i=n(1),o=n(36),l=n.n(o),u=n(10),d=n(13),j=n.n(d),b=n(20),m=n(33),h=n.p+"static/media/logo.b61851f5.svg",O=n(32),p=n(116),x=n(14),f=n(196),g=n(47),v=n(101),w=n(135),y=Object(x.d)(w.a)(a||(a=Object(m.a)(["\n  font-size: 1rem;\n\n  // Primary button\n  ","\n\n  // Google button\n  ","\n\n  // Facebook button\n  ","\n"])),(function(e){return e.$primary&&"\n    background-color: #56B65B !important;\n    border-color: #56B65B;\n\n    &:hover, &:visited {\n      background-color: #4da452 !important;\n      border-color: #4da452;\n    }\n    &:active, &:focus {\n      background-color: #459249 !important;\n      border-color: #459249;\n    }\n    "}),(function(e){return e.$google&&"\n    background-color: #ea4335 !important;\n    border-color: #ea4335;\n    color: white;\n\n    &:active, &:hover, &:focus, &:visited {\n      color: white;\n      background-color: #d33c30 !important;\n      border-color: #d33c30;\n    }\n\n    "}),(function(e){return e.$facebook&&"\n    border-color: #3b5998;\n    color: white;\n    background-color: #3b5998 !important;\n    &:active, &:hover, &:focus, &:visited {\n      color: white;\n      background-color: #355089 !important;\n      border-color: #355089;\n    }\n    "})),k=x.d.span.attrs((function(){return{className:"btn btn-default py-0 px-0"}}))(c||(c=Object(m.a)(["\n  color: ",";\n  &:active,\n  &:hover,\n  &:focus,\n  &:visited {\n    opacity: 95%;\n  }\n\n  ","\n"])),(function(e){return e.theme.text}),(function(e){return e.$delete&&"\n    color: #ea4335;\n    &:active,\n    &:hover,\n    &:focus,\n    &:visited {\n      color: #d33c30;\n    }\n  "})),C=n(279),N=n.n(C).a.create({baseURL:"http://localhost:4000"}),S=function(e){return N.post("/auth/login",e,{withCredentials:!0})},P=function(e){return N.post("/auth/signup",e,{withCredentials:!0})},F=function(){return N.get("/auth/logout",{withCredentials:!0})},R=function(){return N.get("/auth/getuser",{withCredentials:!0})},I=function(e){return N.post("/auth/forgot",e)},D=function(e,t){return N.post("/auth/reset/".concat(t),e)},T=function(e){return N.put("/auth/reset",e,{withCredentials:!0})},E=function(e){return N.get("/user/"+e)},M=function(e){return N.put("/user/settings",e,{withCredentials:!0})},L=function(e){return N.post("/calculation/create",e,{withCredentials:!0})},A=function(e){return N.get("/calculation/".concat(e))},B=function(e){return N.delete("/calculation/".concat(e,"/delete"),{withCredentials:!0})},U=function(e){return N.put("/calculation/".concat(e._id,"/edit"),e,{withCredentials:!0})},z=n(2),q=Object(i.createContext)(),$=function(e){var t=Object(i.useState)(),n=Object(u.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(!0),s=Object(u.a)(r,2),o=s[0],l=s[1];function d(){return m.apply(this,arguments)}function m(){return(m=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:(t=e.sent).data&&c(t.data),l(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){d()}),[]),Object(z.jsx)(q.Provider,{value:{userObject:a,setUserObject:c,loadingUserObject:o,getAuthenticatedUserObject:d},children:e.children})},G=n(42),V=n(546),H=n(542),Y=n(547),_=n(543),K=n(544),W=Object(V.a)({sources:[H.a,Y.a,_.a,K.a]}),J=Object(x.d)(f.a)(r||(r=Object(m.a)(["\n  background-color: ",";\n  padding-top: 0.15rem;\n  padding-bottom: 0.15rem;\n  line-height: 2rem;\n  position: sticky;\n"])),(function(e){return e.theme.navbar})),Z=Object(x.d)(f.a.Brand)(s||(s=Object(m.a)(["\n  font-family: Josefin Sans;\n  font-size: 2rem;\n"])));var Q,X,ee,te,ne=function(e){var t=Object(i.useContext)(q).userObject,n=Object(i.useContext)(x.a),a=Object(i.useState)(!1),c=Object(u.a)(a,2),r=c[0],s=c[1];function o(){return(o=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:200===e.sent.status&&(window.location.href="/");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(z.jsxs)(J,{fixed:"top",expand:"md",variant:"dark",children:[Object(z.jsx)(J.Toggle,{className:"border-0 pb-0","aria-controls":"basic-navbar-nav"}),Object(z.jsx)(p.LinkContainer,{to:"/",children:Object(z.jsxs)(Z,{children:[Object(z.jsx)("img",{alt:"logo",src:h,width:"30",height:"30",className:"d-inline-block align-top ml-3"})," ","receipt hero"]})}),Object(z.jsxs)(J.Collapse,{id:"basic-navbar-nav",children:[Object(z.jsx)(g.a,{className:"mr-auto",children:Object(z.jsx)(p.LinkContainer,{to:"/",children:Object(z.jsx)(g.a.Link,{children:Object(z.jsx)(y,{$primary:!0,size:"sm",children:Object(z.jsxs)("div",{className:"d-flex align-items-center",children:[Object(z.jsx)(G.b,{className:"mr-1"})," Create"]})})})})}),Object(z.jsxs)(g.a,{className:"mr-2",children:[Object(z.jsx)(g.a.Item,{className:"d-flex align-items-center mr-4",children:Object(z.jsx)("button",{className:"as-text",onClick:e.toggleTheme,children:n.emoji})}),t?Object(z.jsxs)(v.a,{title:Object(z.jsx)(W,{src:t.profileImage,googleId:t.googleId,facebookId:t.facebookId,name:"".concat(t.firstName," ").concat(t.lastName),round:!0,size:"33",className:"mr-1"}),id:"navbarScrollingDropdown",alignRight:!0,show:r,onMouseEnter:function(){s(!0)},onMouseLeave:function(){s(!1)},className:"mr-3",children:[Object(z.jsx)(v.a.Item,{as:O.Link,to:"/user/"+t._id,children:"My Calculations"}),Object(z.jsx)(v.a.Item,{as:O.Link,to:"/user/settings",children:"Settings"}),Object(z.jsx)(v.a.Divider,{}),Object(z.jsx)(v.a.Item,{onClick:function(){return o.apply(this,arguments)},children:"Log Out"})]}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(p.LinkContainer,{to:{pathname:"/login",state:{isSignup:!1}},children:Object(z.jsx)(g.a.Link,{children:Object(z.jsx)(y,{size:"sm",variant:"outline-light",className:"px-3",children:"Log in"})})}),Object(z.jsx)(p.LinkContainer,{to:{pathname:"/signup",state:{isSignUp:!0}},children:Object(z.jsx)(g.a.Link,{children:Object(z.jsx)(y,{size:"sm",variant:"light",className:"px-3",children:"Sign up"})})})]})]})]})]})},ae=n(44),ce=n(12),re=n(161),se=n(11),ie=n(37),oe=n(15),le=n(9),ue=n(286),de=n(46),je=function(e){var t=e.label,n=e.as,a=e.xs,c=e.md,r=e.lg,s=e.inputGroupPrepend,i=e.inputGroupAppend,o=e.inputGroupSize,l=Object(ue.a)(e,["label","as","xs","md","lg","inputGroupPrepend","inputGroupAppend","inputGroupSize"]),d=Object(ie.c)(l),j=Object(u.a)(d,2),b=j[0],m=j[1];return Object(z.jsxs)(se.a.Group,{as:n,xs:a,md:c,lg:r,children:[t&&Object(z.jsx)(se.a.Label,{htmlFor:l.name,children:t}),Object(z.jsxs)(de.a,{size:o,children:[s,Object(z.jsx)(se.a.Control,Object(le.a)(Object(le.a)({},b),{},{isInvalid:m.touched&&m.error,feedback:m.error},l)),m.touched&&m.error?Object(z.jsx)(se.a.Control.Feedback,{type:"invalid",children:m.error}):null,i]})]})},be=x.d.div(Q||(Q=Object(m.a)(['\n  display: flex;\n  align-items: center;\n  text-align: center;\n  color: #9d9a9a;\n  :before,\n  :after {\n    content: "";\n    flex: 1;\n    border-bottom: 1px solid #9d9a9a;\n  }\n\n  :not(:empty):before {\n    margin-right: 0.4em;\n  }\n\n  :not(:empty):after {\n    margin-left: 0.4em;\n  }\n']))),me=n(80),he=Object(x.d)(me.a).attrs((function(){return{fluid:"true",className:"mt-4"}}))(X||(X=Object(m.a)(["\n  padding: 0 3%;\n"]))),Oe=Object(x.d)(me.a)(ee||(ee=Object(m.a)(["\n  width: 100%;\n  max-width: 400px;\n  padding: 15px;\n  margin: auto;\n"]))),pe=x.d.div(te||(te=Object(m.a)(["\n  padding: 1.75rem;\n  margin-right: 0;\n  margin-left: 0;\n  margin-bottom: ",";\n  border-width: 1px;\n  border-radius: 0.35rem;\n  box-shadow: 0 0.5rem 1rem 0 rgba(0, 0, 0, 0.1);\n  background-color: ",";\n  color: ",";\n"])),(function(e){return e.$main?"1rem":"0"}),(function(e){return e.theme.body}),(function(e){return e.theme.text})),xe=n(56),fe=n(25);function ge(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(i.useRef)(document.title);Object(i.useEffect)((function(){document.title=e}),[e]),Object(i.useEffect)((function(){var e=n.current;return function(){t||(document.title=e)}}),[])}var ve={firstName:"",lastName:"",email:"",password:"",confirmPassword:""};var we,ye=function(e){var t=Object(i.useContext)(q),n=t.setUserObject,a=t.getAuthenticatedUserObject,c=Object(fe.k)(),r=Object(i.useState)(e.isSignUp),s=Object(u.a)(r,2),o=s[0],l=s[1],d=Object(i.useState)(),m=Object(u.a)(d,2),p=m[0],x=m[1],f=o?oe.d({firstName:oe.e().max(15,"Must be 15 characters or less").required("Required"),lastName:oe.e().max(20,"Must be 20 characters or less").required("Required"),email:oe.e().email("Invalid email address").required("Required"),password:oe.e().required("Required"),confirmPassword:oe.e().test("passwords-match","Passwords must match",(function(e){return this.parent.password===e}))}):oe.d({email:oe.e().email("Invalid email address").required("Required"),password:oe.e().required("Required")});function g(e){o?function(e){v.apply(this,arguments)}(e):function(e){w.apply(this,arguments)}(e)}function v(){return(v=Object(b.a)(j.a.mark((function e(t){var r,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(t);case 3:r=e.sent,n(r.data.userObject),a(),c.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(null===(s=e.t0.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)&&x(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function w(){return(w=Object(b.a)(j.a.mark((function e(t){var r,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(t);case 3:r=e.sent,n(r.data.userObject),a(),c.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(null===(s=e.t0.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)&&x(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){l(e.isSignUp)}),[e.isSignUp]),ge("Receipt Hero - ".concat(o?"Sign Up":"Log In")),Object(z.jsxs)(Oe,{children:[Object(z.jsxs)(re.a.Body,{children:[Object(z.jsx)("img",{className:"mx-auto d-block mb-3",src:h,width:"72",height:"72",alt:"logo"}),Object(z.jsxs)(y,{$google:!0,size:"lg",block:!0,className:"mb-3",onClick:function(){window.open("http://localhost:4000/auth/google","_self")},children:[Object(z.jsx)("i",{className:"fab fa-google"})," ",o?" Sign up ":" Log in ","with Google"]}),Object(z.jsxs)(y,{$facebook:!0,size:"lg",block:!0,onClick:function(){window.open("http://localhost:4000/auth/facebook","_self")},children:[Object(z.jsx)("i",{className:"fab fa-facebook-square"}),o?" Sign up ":" Log in "," with Facebook"]}),Object(z.jsx)(be,{className:"my-3",children:"or"}),p&&Object(z.jsxs)(ae.a,{variant:"danger",onClose:function(){return x(null)},dismissible:!0,className:"d-flex align-items-center",children:[Object(z.jsx)(xe.a,{className:"mr-2"}),p]}),Object(z.jsx)(pe,{children:Object(z.jsx)(ie.b,{validationSchema:f,initialValues:ve,onSubmit:function(e,t){var n=t.setSubmitting;g(e),n(!1)},children:function(e){var t=e.handleSubmit,n=e.isSubmitting;return Object(z.jsxs)(se.a,{noValidate:!0,onSubmit:t,children:[o&&Object(z.jsxs)(se.a.Row,{children:[Object(z.jsx)(je,{as:ce.a,name:"firstName",label:"First Name"}),Object(z.jsx)(je,{as:ce.a,name:"lastName",label:"Last Name"})]}),Object(z.jsx)(je,{name:"email",label:"Email",type:"email"}),Object(z.jsx)(je,{name:"password",label:"Password",type:"password"}),!o&&Object(z.jsx)("div",{className:"mb-4",children:Object(z.jsx)(O.Link,{to:{pathname:"/forgot",state:{isResetPassword:!1}},children:"Forgot password?"})}),Object(z.jsx)(y,{$primary:!0,type:"submit",size:"lg",block:!0,disabled:n,className:"mt-4",children:o?"Sign up":"Log in"})]})}})})]}),Object(z.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[o?"Already":"Don't"," have an account?",Object(z.jsx)(O.Link,{to:{pathname:o?"/login":"/signup",state:{isSignUp:!o}},children:Object(z.jsx)(y,{className:"py-0",variant:"link",onClick:function(){l((function(e){return!e}))},children:o?"Log in":"Sign up"})})]})]})},ke=n(23),Ce=n(98),Ne=n(30),Se=n(195),Pe=n(160),Fe=n(156),Re=n(294),Ie=Object(x.d)(Re.a)(we||(we=Object(m.a)(["\n  .modal-content {\n    background-color: ",";\n    color: ",";\n  }\n\n  .modal-header {\n    border: none;\n  }\n\n  .modal-footer {\n    border: none;\n  }\n\n  .close {\n    color: ",";\n  }\n\n  .list-group-item {\n    background-color: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text})),De=oe.d({taxRate:oe.c().test("validNumberRange","Number must be between 0 and 100",(function(e){return 0<e&&e<=100})).test("maxDigitsAfterDecimal","Number must have 2 digits after decimal or less",(function(e){return/^\d+(\.\d{1,2})?$/.test(e)})).required()});var Te=function(e){var t=Object(i.useContext)(x.a),n=Object(i.useState)(!1),a=Object(u.a)(n,2),c=a[0],r=a[1],s=function(){r(!1)};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(se.a.Row,{children:[Object(z.jsx)(se.a.Group,{as:ce.a,lg:"6",children:Object(z.jsx)(se.a.Control,{label:"Purchase Date",name:"purchaseDate",onChange:function(t){return e.onInputChange(t)},value:e.receipt.purchaseDate,type:"date",required:!0,size:"sm"})}),Object(z.jsx)(se.a.Group,{as:ce.a,lg:"6",children:Object(z.jsx)(se.a.Control,{label:"Store Name",name:"storeName",onChange:function(t){return e.onInputChange(t)},value:e.receipt.storeName,required:!0,size:"sm"})})]}),Object(z.jsxs)(se.a.Row,{children:[Object(z.jsxs)(se.a.Group,{as:ce.a,lg:"6",children:[Object(z.jsx)(se.a.Label,{children:"Receipt Total"}),Object(z.jsxs)(de.a,{size:"sm",children:[Object(z.jsx)(de.a.Prepend,{children:Object(z.jsx)(de.a.Text,{children:"$"})}),Object(z.jsx)(se.a.Control,{name:"total",onChange:function(t){return e.onInputChange(t)},value:e.receipt.total||"",type:"number",min:"0.01",required:!0,placeholder:"0.00"})]})]}),Object(z.jsxs)(se.a.Group,{as:ce.a,lg:"6",children:[Object(z.jsx)(se.a.Label,{children:"Who Paid?"}),Object(z.jsx)(Se.a,{name:"buyer",size:"sm",variant:t.toggleButton,value:e.receipt.buyer,title:e.receipt.buyer,children:e.receipt.people.map((function(t,n){return Object(z.jsx)(Ne.a.Item,{onSelect:function(){return e.onBuyerChange(t)},children:t.name},n)}))})]})]}),Object(z.jsx)(se.a.Row,{children:Object(z.jsxs)(se.a.Group,{as:ce.a,children:[Object(z.jsx)(se.a.Label,{children:"Deductions"}),Object(z.jsx)(Pe.a,{placement:"bottom",delay:{show:0,hide:0},overlay:Object(z.jsx)(Fe.a,{children:"Deduct any unshared items from the receipt."}),children:Object(z.jsxs)(de.a,{size:"sm",children:[Object(z.jsx)(de.a.Prepend,{children:Object(z.jsx)(de.a.Text,{children:"$"})}),Object(z.jsx)(se.a.Control,{name:"amount",onChange:function(t){return e.onDeductionInputChange(t)},value:e.deduction.isTaxed?"0.00"!==e.deduction.amountWithTax?e.deduction.amountWithTax:"":e.deduction.amount||"",type:"number",min:"0",placeholder:"0.00"}),Object(z.jsx)(se.a.Control,{name:"itemName",onChange:function(t){return e.onDeductionInputChange(t)},value:e.deduction.itemName,placeholder:"Item name"}),Object(z.jsx)(Se.a,{name:"personIdx",as:de.a.Append,variant:t.toggleButton,value:e.receipt.people[e.deduction.personIdx].name,title:e.receipt.people[e.deduction.personIdx].name,children:e.receipt.people.map((function(t,n){return Object(z.jsx)(Ne.a.Item,{onSelect:function(n){return e.onDeductionInputChange(n,t)},children:t.name},n)}))}),Object(z.jsx)(de.a.Append,{children:Object(z.jsx)(y,{variant:t.toggleButton,onClick:function(){e.deduction.amount&&e.onDeductionAdd()},children:"Add"})})]})}),Object(z.jsx)(se.a.Check,{className:"mt-1 text-muted",children:Object(z.jsxs)("div",{className:"d-flex align-items-center",children:[Object(z.jsx)(se.a.Check.Input,{id:"taxRateCheckbox",type:"checkbox",checked:e.deduction.isTaxed,onChange:function(t){e.onDeductionInputChange(t)}}),Object(z.jsxs)(se.a.Check.Label,{htmlFor:"taxRateCheckbox",className:"mt-1",children:["Include"," ",Object(z.jsx)(y,{variant:"link",className:"py-0 px-0 pb-1",onClick:function(e){r(!0)},children:"tax"})," ","with item price"]})]})})]})}),Object(z.jsxs)(Ie,{show:c,onHide:s,size:"sm",children:[Object(z.jsx)(Ie.Header,{closeButton:!0,children:Object(z.jsx)(Ie.Title,{children:"Edit tax rate"})}),Object(z.jsx)(Ie.Body,{children:Object(z.jsx)(ie.b,{validationSchema:De,initialValues:{taxRate:e.initialTaxRate},onSubmit:function(t){return function(t){if(e.userObject)try{M(Object(le.a)(Object(le.a)({},e.userObject),{},{taxRate:t}))}catch(a){console.log(a)}else window.localStorage.setItem("taxRate",t);s(),e.setTaxRate(t);var n={target:{name:null,value:null,type:"checkbox",checked:e.deduction.isTaxed}};e.onDeductionInputChange(n)}(t.taxRate)},children:function(e){var t=e.handleSubmit;return Object(z.jsxs)(se.a,{noValidate:!0,onSubmit:t,children:[Object(z.jsx)(je,{type:"number",name:"taxRate",className:"text-right",autoFocus:!0,onFocus:function(e){e.target.select()},onKeyPress:function(e){"Enter"===e.key&&t()},inputGroupPrepend:Object(z.jsx)(de.a.Prepend,{children:Object(z.jsx)(de.a.Text,{children:"%"})})}),Object(z.jsx)(y,{type:"submit",variant:"secondary",className:"mt-4 mb-1 float-right",children:"Done"})]})}})})]})]})},Ee=n(100),Me=n(31);var Le=function(e){var t=Object(i.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(0),s=Object(u.a)(r,2),o=s[0],l=s[1],d=function(){c(!1)};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h6",{children:"Calculation:"}),Object(z.jsxs)(me.a,{fluid:!0,children:[Object(z.jsxs)(Me.a,{children:[Object(z.jsx)(ce.a,{md:5,children:Object(z.jsx)("small",{children:"Receipt total:"})}),Object(z.jsxs)(ce.a,{md:7,className:"text-right",children:["$ ",e.receipt.total.toFixed(2)]})]}),e.receipt.people.map((function(t,n){return t.deductions.length?Object(z.jsxs)(Me.a,{children:[Object(z.jsx)(ce.a,{md:5,children:Object(z.jsxs)("small",{children:[0===n?"Your":"".concat(t.name,"'s")," deductions:"]})}),Object(z.jsxs)(ce.a,{md:7,className:"text-right",children:["- $"," ",Object(z.jsx)(Pe.a,{placement:"bottom",delay:{show:0,hide:0},overlay:Object(z.jsx)(Fe.a,{children:"Edit"}),children:Object(z.jsx)(y,{size:"sm",variant:"link",className:"px-0",onClick:function(){return e=t.idx,l(e),void c(!0);var e},children:e.calculateDeductionsSum(t.deductions).toFixed(2)})})]})]},n):null})),Object(z.jsx)(be,{className:"my-2"}),Object(z.jsxs)(Me.a,{children:[Object(z.jsx)(ce.a,{md:6,children:Object(z.jsx)("small",{children:"Shared total: "})}),Object(z.jsxs)(ce.a,{className:"text-right",md:6,children:["$ ",e.receipt.sharedTotal.toFixed(2)]})]}),Object(z.jsx)(be,{className:"mt-2 mb-3"}),Object(z.jsxs)(Me.a,{children:[Object(z.jsx)(ce.a,{md:6,children:e.receipt.settlement.doesOwe?"You owe ".concat(e.receipt.buyer,":"):"You lent:"}),Object(z.jsx)(ce.a,{className:"text-right",children:Object(z.jsxs)("h5",{children:["$ ",Math.abs(e.receipt.settlement.amount).toFixed(2)]})})]})]}),Object(z.jsxs)(Ie,{show:a,onHide:d,size:"sm",children:[Object(z.jsx)(Ie.Header,{closeButton:!0,children:Object(z.jsxs)(Ie.Title,{children:[e.receipt.people[o].name,"'s deductions"]})}),Object(z.jsx)(Ie.Body,{children:Object(z.jsx)(Ee.a,{variant:"flush",children:e.receipt.people[o].deductions.map((function(t,n){return Object(z.jsx)(Ee.a.Item,{action:!0,children:Object(z.jsxs)("div",{children:["$ ",t.amount.toFixed(2)," ",t.isTaxed?Object(z.jsx)("span",{style:{color:"grey"},children:"(T)"}):null," ",t.itemName?"- "+t.itemName:null," ",Object(z.jsx)(k,{$delete:!0,className:"float-right",onClick:function(){return e.onDeductionDelete(e.receipt.people[o].idx,n)},children:Object(z.jsx)(G.d,{})})]})},n)}))})}),Object(z.jsx)(Ie.Footer,{children:Object(z.jsx)(y,{variant:"secondary",onClick:d,children:"Done"})})]})]})},Ae=Object(i.forwardRef)((function(e,t){var n=Object(i.useContext)(x.a),a={id:0,purchaseDate:"",storeName:"",total:0,sharedTotal:0,buyer:e.calculationObject.people[0].name,settlement:{amount:0},people:e.calculationObject.people.map((function(e){return{idx:e.idx,name:e.name,amount:0,isBuyer:0===e.idx,deductions:[]}}))},c=Object(i.useState)(a),r=Object(u.a)(c,2),s=r[0],o=r[1],l=Object(i.useState)(9.25),d=Object(u.a)(l,2),j=d[0],b=d[1],m={id:null,amount:0,amountWithTax:0,itemName:"",personIdx:0,isTaxed:!1},h=Object(i.useState)(m),O=Object(u.a)(h,2),p=O[0],f=O[1];function g(e){return e.reduce((function(e,t){return 1*e+1*(t.isTaxed?t.amountWithTax:t.amount)}),0)}function v(e){for(var t=e.people,n=e.total,a=e.people.length,c=0;c<a;c++){var r=t[c];t[c].amount=r.isBuyer?e.total:0;var s=g(r.deductions);t[c].amount-=1*s,n-=1*s}var i=n/a;for(c=0;c<a;c++)t[c].amount-=(1*i).toFixed(2);var o=t[0].amount,l=o<0;return{sharedTotal:n,people:t,settlement:{message:l?"You owe ".concat(e.buyer," $").concat(Math.abs(o).toFixed(2)):"You lent $".concat(Math.abs(o).toFixed(2)),amount:Math.abs(o).toFixed(2),doesOwe:l}}}function w(e){var t=e.indexOf(".")>=0?e.substr(0,e.indexOf("."))+e.substr(e.indexOf("."),3):e;return t*=t<0?-1:1}function k(e){o((function(t){for(var n=Object(ke.a)(t.people),a=0;a<n.length;a++)n[a].isBuyer=a===e.idx;return Object(le.a)(Object(le.a)({},t),{},{buyer:e.name,people:n})}))}Object(i.useImperativeHandle)(t,(function(){return{calculateBalanceOwed:v}})),Object(i.useEffect)((function(){var e=v(s);o((function(t){return Object(le.a)(Object(le.a)({},t),e)}))}),[s.total,s.deductions,s.buyer,JSON.stringify(s.people)]),Object(i.useEffect)((function(){o((function(t){for(var n=Object(ke.a)(t.people),a=0;a<n.length;a++)n[a].name=e.calculationObject.people[a].name,n[a].isBuyer&&n[a].name!==t.buyer&&k(n[a]);return Object(le.a)(Object(le.a)({},t),{},{people:n})}))}),[JSON.stringify(e.calculationObject.people)]);var C=Object(i.useContext)(q).userObject;return Object(i.useEffect)((function(){(null===C||void 0===C?void 0:C.taxRate)?b(C.taxRate):window.localStorage.getItem("taxRate")&&b(window.localStorage.getItem("taxRate"))}),[C]),Object(z.jsxs)(se.a,{onSubmit:function(t){e.onAdd(s),t.preventDefault(),o(a)},children:[Object(z.jsx)("h4",{children:"Add a Receipt"}),Object(z.jsx)("hr",{}),Object(z.jsx)(Te,{receipt:s,deduction:p,onInputChange:function(e){var t=e.target,n=t.name,a=t.value,c=t.type;o((function(e){return"number"===c?Object(le.a)(Object(le.a)({},e),{},Object(Ce.a)({},n,w(a))):Object(le.a)(Object(le.a)({},e),{},Object(Ce.a)({},n,a))}))},onBuyerChange:k,onDeductionInputChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;f((function(n){if(t)return Object(le.a)(Object(le.a)({},n),{},{personIdx:t.idx});var a=e.target,c=a.name,r=a.value,s=a.type,i=a.checked;if("number"===s){var o=0,l=0;return n.isTaxed?o=((l=w(r))/(j/100+1)).toFixed(2):l=((o=w(r))*(j/100+1)).toFixed(2),Object(le.a)(Object(le.a)({},n),{},{amount:o,amountWithTax:l})}if("checkbox"===s){var u=n.amount*(j/100+1)*1;return Object(le.a)(Object(le.a)({},n),{},{amountWithTax:u.toFixed(2),isTaxed:i})}return Object(le.a)(Object(le.a)({},n),{},Object(Ce.a)({},c,r))}))},onDeductionAdd:function(){o((function(e){var t=Object(ke.a)(e.people);return t[p.personIdx].deductions.push(p),Object(le.a)(Object(le.a)({},e),{},{people:t})})),f(m)},initialTaxRate:j,setTaxRate:b,userObject:C}),Object(z.jsx)("hr",{}),Object(z.jsx)(Le,{receipt:s,calculateDeductionsSum:g,onDeductionDelete:function(e,t){o((function(n){var a=Object(ke.a)(n.people);return a[e].deductions=a[e].deductions.filter((function(e,n){return n!==t})),Object(le.a)(Object(le.a)({},n),{},{people:a})})),f(m)}}),Object(z.jsx)(y,{variant:n.toggleButton,type:"submit",block:!0,className:"mt-2",children:"Add"})]})})),Be=n(157),Ue=n.n(Be),ze=n(99),qe=n.n(ze),$e=n(158),Ge=n.n($e),Ve=(n(267),n(268),n(159)),He=n(82);var Ye=function(e){var t=Object(i.useContext)(x.a);return e.calculationObject.receipts.length?Object(z.jsxs)("div",{children:[Object(z.jsx)("h4",{children:"Total balance:"}),function(e){if(2===e.calculationObject.people.length){var n=e.calculationObject.people[0],a=e.calculationObject.people[1];return n.totalAmount>0?Object(z.jsxs)("h6",{style:{color:t.cellColorGreen},children:[a.name," owes you $",Math.abs(a.totalAmount).toFixed(2)]}):a.totalAmount>0?Object(z.jsxs)("h5",{style:{color:t.cellColorOrange},children:["You owe ",a.name," $",Math.abs(n.totalAmount).toFixed(2)]}):null}}(e)]}):null},_e=n(287),Ke=n.n(_e),We=n.p+"static/media/empty-table.2b29fc38.svg",Je=n(288),Ze=n.n(Je);var Qe=function(e){var t=Object(i.useContext)(x.a);function n(e){return e?"$ "+parseFloat(e).toFixed(2):""}var a={whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"};return[{dataField:"purchaseDate",text:"Date",type:"date",editable:e.editMode,style:a,sort:!0,formatter:function(e){var t=e;return"object"!==typeof e&&(t=new Date(e)),"".concat(("0"+(t.getUTCMonth()+1)).slice(-2),"/").concat(("0"+t.getUTCDate()).slice(-2),"/").concat(t.getUTCFullYear())},csvFormatter:function(e){var t=e;return"object"!==typeof e&&(t=new Date(e)),"".concat(("0"+(t.getUTCMonth()+1)).slice(-2),"/").concat(("0"+t.getUTCDate()).slice(-2),"/").concat(t.getUTCFullYear())},editor:{type:$e.Type.DATE}},{dataField:"storeName",text:"Name",style:a,sort:!0,editable:e.editMode},{dataField:"buyer",text:"Buyer",style:a,sort:!0,editable:!1},{dataField:"total",text:"Receipt Total",type:"number",sort:!0,editable:e.editMode,style:a,formatter:function(e){return n(e)},csvFormatter:function(e){return n(e)},csvType:Number},{dataField:"settlement.message",text:"Settlement",sort:!0,editable:!1,style:function(e,n,a,c){return{whiteSpace:"normal",wordWrap:"break-word",color:n.settlement.doesOwe?t.cellColorOrange:t.cellColorGreen}}},{dataField:"id",text:"",align:"center",editable:!1,searchable:!1,headerStyle:function(e,t){return{width:"8%"}},formatExtraData:e.editMode,formatter:function(t,n,a,c){return c?Object(z.jsx)("div",{className:"text-nowrap",children:Object(z.jsx)(k,{$delete:!0,className:"hide-on-print",onClick:function(){return e.onDeleteReceipt(n.id)},children:Object(z.jsx)(G.d,{})})}):null},csvType:Number,csvFormatter:function(e){return""}}]},Xe=n(545),et=oe.d({people:oe.a().of(oe.d({name:oe.e().max(20,"Must be 20 characters or less").required("Required")}))});var tt=function(e){return Object(z.jsxs)(Ie,{show:e.showModal,onHide:e.onCloseModal,size:"sm",children:[Object(z.jsx)(Ie.Header,{closeButton:!0,children:Object(z.jsx)(Ie.Title,{as:"h5",children:"Split between"})}),Object(z.jsx)(Ie.Body,{children:Object(z.jsx)(ie.b,{initialValues:{people:e.calculationObject.people},validationSchema:et,onSubmit:function(t){e.onUpdatePeople(t.people),e.onCloseModal()},children:function(t){var n=t.handleSubmit,a=t.values;return Object(z.jsxs)(se.a,{noValidate:!0,children:[Object(z.jsx)(ie.a,{name:"people",children:function(t){var c=t.remove,r=t.push;return Object(z.jsxs)("div",{children:[a.people.map((function(t,a){return Object(z.jsx)(Ee.a,{variant:"flush",children:Object(z.jsx)(Ee.a.Item,{className:"pb-0",children:Object(z.jsxs)(se.a.Row,{children:[Object(z.jsx)(je,{autoFocus:!0,as:ce.a,xs:10,name:"people.".concat(a,".name"),onFocus:function(e){e.target.select()},onKeyPress:function(e){"Enter"===e.key&&n()}}),Object(z.jsx)(ce.a,{xs:2,children:(!e.id||e.isUsersCalculation&&e.editMode)&&Object(z.jsxs)("div",{className:"mt-1 text-right",children:[0===a&&Object(z.jsx)("p",{className:"text-muted mr-3 mb-0",children:"(You)"}),a>=2&&Object(z.jsx)(k,{$delete:!0,onClick:function(){c(a)},children:Object(z.jsx)(G.d,{})})]})})]})})},a)})),Object(z.jsx)(y,{block:!0,variant:"link",onClick:function(){r({idx:Object(Xe.a)(),name:"",totalAmount:0})},children:"Add another person"})]})}}),Object(z.jsx)(y,{type:"button",onClick:n,variant:"secondary",className:"mt-4 mb-1 float-right",children:"Done"})]})}})})]})};var nt=function(e){var t=Object(i.useContext)(x.a),n=Object(i.useContext)(q).userObject,a=Object(fe.k)(),c=n&&n.calculations&&n.calculations.includes(e.calculationObject._id),r=Qe(e),s=Object(i.useRef)(),o=ze.Search.SearchBar,l=function(e){return Object(z.jsx)(y,{className:"btn-sm",variant:"link",onClick:function(){e.onExport()},children:Object(z.jsxs)("div",{className:"d-flex align-items-center",children:[Object(z.jsx)(G.a,{className:"mr-1"})," Export CSV"]})})},d=Ge()({mode:"click",blurToSave:!0,afterSaveCell:function(t,n,a){e.onEditReceipt(a)}}),j=Object(i.useState)(!1),b=Object(u.a)(j,2),m=b[0],h=b[1];function O(){h((function(e){return!e}))}var p=Object(i.useState)(!1),f=Object(u.a)(p,2),g=f[0],v=f[1];function w(e){v(!0)}return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(qe.a,{keyField:"id",bootstrap4:!0,data:e.calculationObject.receipts,columns:r,exportCSV:{fileName:e.calculationObject.title+".csv",ignoreFooter:!1},search:!0,children:function(n){return Object(z.jsx)("div",{ref:s,children:Object(z.jsxs)(me.a,{fluid:!0,className:"px-0",children:[Object(z.jsxs)(Me.a,{children:[Object(z.jsx)(ce.a,{xs:12,sm:6,children:Object(z.jsx)("div",{className:"d-inline-flex",children:m?Object(z.jsx)(Ze.a,{onOutsideClick:function(t){e.onSaveCalculationObject(),h(!1)},children:Object(z.jsx)(se.a.Group,{children:Object(z.jsx)(se.a.Control,{autoFocus:!0,defaultValue:e.calculationObject.title,onChange:function(t){return e.onEditCalculationTitle(t)},onKeyPress:function(t){"Enter"===t.key&&(e.onSaveCalculationObject(),O())},onFocus:function(e){e.target.select()}})})}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h4",{onClick:function(){e.editMode&&O()},children:e.calculationObject.title}),e.editMode&&Object(z.jsx)(k,{onClick:O,className:"hide-on-print",children:Object(z.jsx)(He.a,{className:"ml-2"})})]})})}),Object(z.jsx)(ce.a,{xs:12,sm:6,children:c&&!e.editMode&&Object(z.jsx)("div",{className:"float-right",children:Object(z.jsx)(y,{variant:t.toggleButton,className:"hide-on-print",size:"sm",onClick:function(){a.push("/calculation/".concat(e.calculationObject._id,"/edit"))},children:Object(z.jsxs)("div",{className:"d-flex align-items-center",children:[Object(z.jsx)(He.a,{className:"mr-1"})," Edit"]})})})})]}),Object(z.jsx)(Me.a,{className:"pb-1 mb-2",children:Object(z.jsx)(ce.a,{xs:12,sm:6,children:Object(z.jsx)(y,{className:"btn-sm px-0 py-0",variant:"link",onClick:w,children:Object(z.jsxs)("div",{className:"d-flex align-items-center",children:[Object(z.jsx)(Ve.a,{className:"mr-1"})," ",e.calculationObject.people.length," people"]})})})}),Object(z.jsxs)(Me.a,{className:"mb-3 hide-on-print",children:[Object(z.jsx)(ce.a,{xs:12,sm:6,children:Object(z.jsx)("div",{className:"form-inline",children:Object(z.jsx)("div",{className:"form-group",children:Object(z.jsx)(o,Object(le.a)({className:"form-control-sm"},n.searchProps))})})}),Object(z.jsx)(ce.a,{xs:12,sm:6,children:Object(z.jsxs)("div",{className:"float-right",children:[Object(z.jsx)(l,Object(le.a)({},n.csvProps)),Object(z.jsx)(Ke.a,{trigger:function(){return Object(z.jsx)(y,{size:"sm",variant:"link",children:Object(z.jsxs)("div",{className:"d-flex align-items-center",children:[Object(z.jsx)(G.c,{className:"mr-1"})," Print"]})})},content:function(){return s.current},documentTitle:e.calculationObject.title})]})})]}),Object(z.jsx)(Me.a,{children:Object(z.jsx)(ce.a,{children:Object(z.jsx)(Ue.a,Object(le.a)(Object(le.a)({},n.baseProps),{},{cellEdit:d,bordered:!1,condensed:!0,noDataIndication:function(){return Object(z.jsxs)("div",{children:[Object(z.jsx)("h4",{className:"mt-4",children:n.searchProps.searchText?"No records found.":e.editMode?"Add a receipt to begin.":"No receipts to show."}),Object(z.jsx)("img",{className:"mx-auto d-block mt-3",src:We,width:"270",height:"270",alt:"Empty table."})]})}}))})}),Object(z.jsx)(Me.a,{children:Object(z.jsx)(ce.a,{children:Object(z.jsx)("div",{children:Object(z.jsx)(Ye,{calculationObject:e.calculationObject})})})})]})})}}),Object(z.jsx)(tt,Object(le.a)(Object(le.a)({},e),{},{showModal:g,isUsersCalculation:c,onCloseModal:function(){v(!1)}}))]})},at=n(289),ct=function(){return Object(z.jsx)("div",{className:"d-flex justify-content-center align-items-center h-75",children:Object(z.jsx)(at.a,{animation:"grow",variant:"success"})})};var rt=function(e){var t=Object(i.useContext)(q),n=t.userObject,a=t.loadingUserObject,c=t.getAuthenticatedUserObject,r=Object(i.useMemo)((function(){return{title:"Untitled",_id:null,receipts:[],people:[{idx:0,name:"Me",totalAmount:0},{idx:1,name:"User 2",totalAmount:0}]}}),[]),s=function(e){var t=Object(i.useState)(e),n=Object(u.a)(t,2),a=n[0],c=n[1],r=Object(i.useRef)(null),s=Object(i.useCallback)((function(e,t){r.current=t,c(e)}),[]);return Object(i.useEffect)((function(){r.current&&(r.current(a),r.current=null)}),[a]),[a,s]}(r),o=Object(u.a)(s,2),l=o[0],d=o[1],m=function(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e})),t.current}({calculationObject:l}),h=Object(i.useState)(!0),O=Object(u.a)(h,2),p=O[0],x=O[1],f=Object(i.useState)(!0),g=Object(u.a)(f,2),v=g[0],w=g[1],k=Object(i.useState)(),C=Object(u.a)(k,2),N=C[0],S=C[1],P=Object(i.useRef)(),F=Object(fe.m)().id,R=Object(fe.k)();function I(){return(I=Object(b.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(l);case 3:return e.next=5,c();case 5:R.push("/user/".concat(n._id)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(null===(t=e.t0.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)?S(e.t0.response.data.message):S("An unexpected error occurred.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function D(e){return T.apply(this,arguments)}function T(){return(T=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(null===(n=e.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)?S(e.t0.response.data.message):S("An unexpected error occurred.");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t);case 3:(n=e.sent).data&&d(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),R.push("/not-found");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var t;F?(function(t){e.apply(this,arguments)}(F),-1!==window.location.href.indexOf("edit")?a||((null===n||void 0===n||null===(t=n.calculations)||void 0===t?void 0:t.some((function(e){return e===F})))?w(!0):R.push("/login")):w(!1)):(d(r),w(!0))}),[F,R,n,a,r,R.location,d]),Object(z.jsx)(z.Fragment,{children:a?Object(z.jsx)(ct,{}):Object(z.jsxs)(z.Fragment,{children:[!n&&p&&v&&Object(z.jsxs)(ae.a,{variant:"info",onClose:function(){return x(!1)},dismissible:!0,className:"d-flex align-items-center",children:[Object(z.jsx)(Ve.b,{className:"mr-2"})," You are not logged in.",Object(z.jsx)(ae.a.Link,{href:"/login",className:"mx-1",children:"Log in"}),"or",Object(z.jsx)(ae.a.Link,{href:"/signup",className:"mx-1",children:"sign up"})," ","to save your calculations."]}),N&&Object(z.jsxs)(ae.a,{variant:"danger",dismissible:!0,onClose:function(){return S(null)},className:"d-flex align-items-center",children:[Object(z.jsx)(xe.a,{className:"mr-2"}),N]}),Object(z.jsxs)(Me.a,{children:[v&&Object(z.jsx)(ce.a,{md:4,children:Object(z.jsx)(pe,{$main:!0,children:Object(z.jsx)(Ae,{onAdd:function(e){d((function(t){var n=t.receipts;e.total=parseFloat(e.total).toFixed(2),e.id=Object(Xe.a)();var a=Object(ke.a)(t.people).map((function(t){return Object(le.a)(Object(le.a)({},t),{},{totalAmount:t.totalAmount+e.people[t.idx].amount})}));return Object(le.a)(Object(le.a)({},t),{},{receipts:[].concat(Object(ke.a)(n),[e]),people:a})}),(function(e){F&&D(e)}))},ref:P,calculationObject:l})})}),Object(z.jsx)(ce.a,{md:v&&8,children:Object(z.jsxs)(pe,{$main:!0,className:"pb-3",children:[Object(z.jsx)(nt,{calculationObject:l,onDeleteReceipt:function(e){d((function(t){var n=Object(ke.a)(t.people),a=Object(ke.a)(t.receipts).filter((function(t){return e===t.id&&(n=n.map((function(e){return Object(le.a)(Object(le.a)({},e),{},{totalAmount:e.totalAmount-t.people[e.idx].amount})}))),e!==t.id}));return Object(le.a)(Object(le.a)({},t),{},{receipts:a,people:n})}),(function(e){F&&D(e)}))},onEditReceipt:function(e){d((function(t){var n=Object(ke.a)(t.people),a=Object(ke.a)(t.receipts).map((function(t){if(t.id!==e.id)return t;n=n.map((function(e){return Object(le.a)(Object(le.a)({},e),{},{totalAmount:e.totalAmount-t.people[e.idx].amount})}));var a=P.current.calculateBalanceOwed(e);return Object(le.a)(Object(le.a)({},e),a)}));return n=n.map((function(t){return Object(le.a)(Object(le.a)({},t),{},{totalAmount:t.totalAmount+e.people[t.idx].amount})})),Object(le.a)(Object(le.a)({},t),{},{receipts:a,people:n})}),(function(e){F&&D(e)}))},onEditCalculationTitle:function(e){var t=e.target.value?e.target.value:"Untitled";d((function(e){return Object(le.a)(Object(le.a)({},e),{},{title:t})}))},editMode:v,onUpdatePeople:function(e){d((function(t){return console.log(t.people),console.log(e),Object(le.a)(Object(le.a)({},t),{},{people:e})}))},onSaveCalculationObject:function(){m&&JSON.stringify(m.calculationObject)!==JSON.stringify(l)&&d((function(e){return Object(le.a)({},e)}),(function(e){F&&D(e)}))}}),n&&!F&&Object(z.jsx)(y,{$primary:!0,size:"lg",onClick:function(){return I.apply(this,arguments)},children:"Publish"})]})})]})]})})},st=n.p+"static/media/spaceman.7cfe5c57.svg";var it=function(){return ge("Receipt Hero - Not Found"),Object(z.jsxs)("div",{className:"d-flex flex-column justify-content-center mt-5",children:[Object(z.jsx)("h1",{className:"text-center mt-5",children:"Page not found"}),Object(z.jsx)("img",{className:"mx-auto d-block mt-4",src:st,width:"270",height:"270",alt:"logo"})]})},ot=n(117),lt=n(295),ut=n(290),dt=function(e){return new Promise((function(t,n){var a=new Image;a.addEventListener("load",(function(){return t(a)})),a.addEventListener("error",(function(e){return n(e)})),a.setAttribute("crossOrigin","anonymous"),a.src=e}))};function jt(e){return e*Math.PI/180}function bt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=Object(b.a)(j.a.mark((function e(t,n){var a,c,r,s,i,o,l,u=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:0,e.next=3,dt(t);case 3:return c=e.sent,r=document.createElement("canvas"),s=r.getContext("2d"),i=Math.max(c.width,c.height),o=i/2*Math.sqrt(2)*2,r.width=o,r.height=o,s.translate(o/2,o/2),s.rotate(jt(a)),s.translate(-o/2,-o/2),s.drawImage(c,o/2-.5*c.width,o/2-.5*c.height),l=s.getImageData(0,0,o,o),r.width=n.width,r.height=n.height,s.putImageData(l,Math.round(0-o/2+.5*c.width-n.x),Math.round(0-o/2+.5*c.height-n.y)),e.abrupt("return",r.toDataURL("image/jpeg"));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(b.a)(j.a.mark((function e(t){var n,a,c,r,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:0,e.next=3,dt(t);case 3:return a=e.sent,c=document.createElement("canvas"),r=c.getContext("2d"),90===n||-90===n||270===n||-270===n?(c.width=a.height,c.height=a.width):(c.width=a.width,c.height=a.height),r.translate(c.width/2,c.height/2),r.rotate(n*Math.PI/180),r.drawImage(a,-a.width/2,-a.height/2),e.abrupt("return",new Promise((function(e){c.toBlob((function(t){e(URL.createObjectURL(t))}),"image/png")})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(532);var pt=n(291),xt=n.n(pt),ft=Object(V.a)({sources:[H.a,Y.a,_.a,K.a]}),gt={3:180,6:90,8:-90},vt=oe.d({firstName:oe.e().max(15,"Must be 15 characters or less").required("Required"),lastName:oe.e().max(20,"Must be 20 characters or less").required("Required"),email:oe.e().email("Invalid email address").required("Required"),profileImage:oe.b()});function wt(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)}),!1),n.readAsDataURL(e)}))}var yt=function(e){var t=Object(i.useContext)(x.a),n=Object(i.useState)(),a=Object(u.a)(n,2),c=a[0],r=a[1],s=Object(i.useState)({x:0,y:0}),o=Object(u.a)(s,2),l=o[0],d=o[1],m=Object(i.useState)(1),h=Object(u.a)(m,2),O=h[0],p=h[1],f=Object(i.useState)(),g=Object(u.a)(f,2),v=g[0],w=g[1],k=Object(i.useState)(!1),C=Object(u.a)(k,2),N=C[0],S=C[1],P=Object(i.useState)(!1),F=Object(u.a)(P,2),R=F[0],I=F[1],D=Object(i.useRef)(null),T=Object(i.useRef)(),E={border:"1px solid"+t.borderColor,background:t.body,color:t.text,position:"absolute",bottom:0,right:0,borderRadius:"10%"},M={firstName:e.userObject.firstName,lastName:e.userObject.lastName,email:e.userObject.email,profileImage:e.userObject.profileImage},L=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,c,s,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.target.files&&n.target.files.length>0)){t.next=21;break}if(a=n.target.files[0],!(a.size/1024/1024>1)){t.next=7;break}e.setErrorMessage("Please upload a picture smaller than 1 MB."),t.next=20;break;case 7:return t.next=9,wt(a);case 9:return c=t.sent,t.next=12,Object(ut.getOrientation)(a);case 12:if(s=t.sent,!(i=gt[s])){t.next=18;break}return t.next=17,ht(c,i);case 17:c=t.sent;case 18:r(c),S(!0);case 20:n.target.value=null;case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=Object(i.useCallback)((function(e,t){w(t)}),[]),B=Object(i.useCallback)(Object(b.a)(j.a.mark((function t(){var n,a,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,bt(c,v);case 3:n=t.sent,T.current.setFieldValue("profileImage",n,!1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(null===(a=t.t0.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)?e.setErrorMessage(t.t0.response.data.message):e.setErrorMessage("An unexpected error occurred.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e,c,v]);function U(){r(),S(!1)}return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(ie.b,{validationSchema:vt,initialValues:M,innerRef:T,onSubmit:function(t,n){var a=n.setSubmitting;n.resetForm;e.handleSubmitUserSettings(t).then((function(){a(!1)}))},children:function(t){var n=t.handleSubmit,a=t.isSubmitting,c=t.values,r=t.setFieldValue;return Object(z.jsxs)(se.a,{noValidate:!0,onSubmit:n,children:[Object(z.jsxs)(Me.a,{children:[Object(z.jsxs)(ce.a,{xs:{span:12,order:2},md:{span:7,order:1},children:[Object(z.jsx)(je,{label:"First Name",name:"firstName"}),Object(z.jsx)(je,{label:"Last Name",name:"lastName"}),Object(z.jsx)(je,{label:"Email",name:"email"})]}),Object(z.jsx)(ce.a,{xs:{span:12,order:1},md:{span:5,order:2},children:Object(z.jsxs)(se.a.Group,{children:[Object(z.jsx)(se.a.Label,{children:"Profile Image"}),Object(z.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(z.jsx)(ft,{size:200,src:c.profileImage,googleId:e.userObject.googleId,facebookId:e.userObject.facebookId,name:"".concat(e.userObject.firstName," ").concat(e.userObject.lastName),round:!0,className:"my-2",style:{flex:"0 0 auto"}}),Object(z.jsxs)(Ne.a,{show:R,onMouseEnter:function(){I(!0)},onMouseLeave:function(){I(!1)},children:[Object(z.jsx)(Ne.a.Toggle,{style:E,bsPrefix:"py-0 px-1",children:Object(z.jsxs)("div",{className:"d-flex align-items-center",children:[Object(z.jsx)(He.a,{className:"mr-1"})," Edit"]})}),Object(z.jsxs)(Ne.a.Menu,{children:[Object(z.jsx)(Ne.a.Item,{onClick:function(e){D.current.click()},children:"Upload a photo"}),Object(z.jsx)(Ne.a.Item,{onClick:function(e){e.preventDefault(),window.confirm("Are you sure you want to reset your current avatar?")&&r("profileImage",null,!1)},children:"Revert to original"})]}),Object(z.jsx)(se.a.File,{accept:"image/*",name:"profileImage",onChange:L,ref:D,hidden:!0})]})]})]})})]}),Object(z.jsx)(y,{$primary:!0,type:"submit",className:"mt-2",size:"lg",disabled:a,children:a?"Loading...":"Save"})]})}}),Object(z.jsxs)(Ie,{show:N,onHide:U,children:[Object(z.jsx)(Ie.Header,{closeButton:!0,children:Object(z.jsx)(Ie.Title,{as:"h5",children:"Crop your new profile picture"})}),Object(z.jsxs)(Ie.Body,{children:[Object(z.jsx)("div",{style:{position:"relative",width:"100%",height:400,background:t.borderColor},children:Object(z.jsx)(lt.a,{image:c,crop:l,zoom:O,aspect:1,cropShape:"round",showGrid:!1,onCropChange:d,onCropComplete:A,onZoomChange:p})}),Object(z.jsx)("div",{style:{padding:16,display:"flex",flexDirection:"column",alignItems:"stretch"},children:Object(z.jsxs)(se.a.Group,{as:Me.a,style:{display:"flex",flex:"1",alignItems:"center"},children:[Object(z.jsx)(se.a.Label,{column:!0,sm:"4",children:"Zoom"}),Object(z.jsx)(ce.a,{sm:"8",children:Object(z.jsx)(xt.a,{value:O,min:1,max:3,step:.1,onChange:function(e,t){return p(t)},tooltip:"off",variant:"success",style:{padding:"22px 0px",marginLeft:16}})})]})}),Object(z.jsx)(y,{variant:"success",onClick:function(){B(),U()},block:!0,children:"Done"})]})]})]})},kt=oe.d({currentPassword:oe.e().required("Required"),newPassword:oe.e().required("Required"),confirmNewPassword:oe.e().test("passwords-match","Passwords must match",(function(e){return this.parent.newPassword===e}))}),Ct={currentPassword:"",newPassword:"",confirmNewPassword:""};var Nt=function(e){return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(ie.b,{validationSchema:kt,initialValues:Ct,onSubmit:function(t,n){var a=n.setSubmitting,c=n.resetForm;e.handleSubmitPassword(t).then((function(){a(!1),c(Ct)}))},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,a=(e.isValid,e.errors),c=e.values;return Object(z.jsxs)(se.a,{noValidate:!0,onSubmit:t,children:[Object(z.jsxs)(se.a.Row,{children:[Object(z.jsx)(je,{as:ce.a,md:7,label:"Current Password",name:"currentPassword",type:"password"}),Object(z.jsx)(je,{as:ce.a,md:7,label:"New Password",name:"newPassword",type:"password",isValid:!a.confirmNewPassword&&c.newPassword}),Object(z.jsx)(je,{as:ce.a,md:7,label:"Confirm New Password",name:"confirmNewPassword",type:"password",isValid:!a.confirmNewPassword&&c.confirmNewPassword})]}),Object(z.jsx)(y,{$primary:!0,type:"submit",className:"mt-2",size:"lg",disabled:n,children:n?"Loading...":"Save"})]})}})})},St=n(293);var Pt=function(){var e=Object(i.useContext)(q),t=e.userObject,n=e.getAuthenticatedUserObject,a=Object(i.useContext)(x.a),c=Object(i.useState)(!1),r=Object(u.a)(c,2),s=r[0],o=r[1],l=Object(i.useState)(),d=Object(u.a)(l,2),m=d[0],h=d[1],O=Object(i.useState)("Receipt Hero - Edit Profile"),p=Object(u.a)(O,2),f=p[0],v=p[1];function w(){return(w=Object(b.a)(j.a.mark((function e(a){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(Object(le.a)(Object(le.a)({},t),a));case 3:n(),o(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(null===(c=e.t0.response)||void 0===c||null===(r=c.data)||void 0===r?void 0:r.message)&&h(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function k(){return(k=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t);case 3:o(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),(null===(n=e.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)&&h(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function C(e){v("Receipt Hero - ".concat(e)),h(null)}function N(){h(null),o(!1)}function S(){return m?Object(z.jsxs)(ae.a,{variant:"danger",onClose:function(){return h(null)},className:"d-flex align-items-center",dismissible:!0,children:[Object(z.jsx)(xe.a,{className:"mr-2"}),m]}):null}return ge(f),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(pe,{$main:!0,children:Object(z.jsx)(ot.a.Container,{defaultActiveKey:"Edit Profile",children:Object(z.jsxs)(Me.a,{children:[Object(z.jsx)(ce.a,{sm:3,style:{borderRight:"1px solid"+a.borderColor},children:Object(z.jsxs)(g.a,{variant:"pills",className:"flex-column",children:[Object(z.jsx)(g.a.Item,{children:Object(z.jsx)(g.a.Link,{eventKey:"Edit Profile",onSelect:C,children:"Profile"})}),Object(z.jsx)(g.a.Item,{children:Object(z.jsx)(g.a.Link,{eventKey:"Change Password",onSelect:C,children:"Password"})})]})}),Object(z.jsx)(ce.a,{sm:9,className:"pl-4",children:Object(z.jsxs)(ot.a.Content,{children:[Object(z.jsxs)(ot.a.Pane,{eventKey:"Edit Profile",children:[Object(z.jsx)("h3",{className:"mb-2",children:"Edit Profile"}),Object(z.jsx)("hr",{}),Object(z.jsx)(S,{}),Object(z.jsx)(yt,{userObject:t,setErrorMessage:h,handleSubmitUserSettings:function(e){return w.apply(this,arguments)}})]}),Object(z.jsxs)(ot.a.Pane,{eventKey:"Change Password",children:[Object(z.jsx)("h3",{className:"mb-2",children:"Change Password"}),Object(z.jsx)("hr",{}),Object(z.jsx)(S,{}),Object(z.jsx)(Nt,{handleSubmitPassword:function(e){return k.apply(this,arguments)}})]})]})})]})})}),Object(z.jsxs)(Ie,{show:s,onHide:N,size:"sm",children:[Object(z.jsx)(Ie.Body,{children:Object(z.jsxs)("div",{className:"text-center",children:[Object(z.jsx)(St.a,{className:"mt-3",size:56}),Object(z.jsx)("h5",{className:"mt-4 mb-0",children:"Your settings have been saved."})]})}),Object(z.jsx)(Ie.Footer,{children:Object(z.jsx)(y,{variant:"secondary",onClick:N,children:"OK"})})]})]})},Ft=n.p+"static/media/inkpot.ccc12094.svg";var Rt=function(e){var t=Object(fe.m)().id,n=Object(i.useState)(),a=Object(u.a)(n,2),c=a[0],r=a[1],s=Object(i.useState)("Calculations - Receipt Hero"),o=Object(u.a)(s,2),l=o[0],d=o[1],m=Object(i.useState)(null),h=Object(u.a)(m,2),p=h[0],x=h[1],f=Object(i.useState)(!0),g=Object(u.a)(f,2),v=g[0],w=g[1],C=Object(i.useState)(!1),N=Object(u.a)(C,2),S=N[0],P=N[1],F=Object(i.useState)(),R=Object(u.a)(F,2),I=R[0],D=R[1],T=Object(fe.k)();Object(i.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(t);case 3:(n=e.sent).data&&(r(n.data),d("".concat(n.data.firstName,"'s Calculations - Receipt Hero"))),w(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),T.push("/not-found");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(t)}),[t,T]),ge(l);var M=function(){x(null),P(!1)},L=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=12;break}return t=c.calculations,r((function(e){return Object(le.a)(Object(le.a)({},e),{},{calculations:t.filter((function(e){return e._id!==p}))})})),e.prev=3,e.next=6,B(p);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),r((function(e){return Object(le.a)(Object(le.a)({},e),{},{calculations:t})})),(null===(n=e.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)?D(e.t0.response.data.message):D("Whoops! An unexpected error occurred.");case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}(),A=ze.Search.SearchBar,U=[{dataField:"_id",hidden:"true"},{dataField:"title",text:"Name",sort:!0,formatter:function(e,t){return Object(z.jsx)(y,{className:"py-0 px-0",variant:"link",children:e})},events:{onClick:function(e,t,n,a,c){T.push("/calculation/"+a._id)}}},{dataField:"createdAt",text:"Created",type:"date",style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},sort:!0,formatter:function(e){var t=e;return"object"!==typeof e&&(t=new Date(e)),"".concat(("0"+(t.getUTCMonth()+1)).slice(-2),"/").concat(("0"+t.getUTCDate()).slice(-2),"/").concat(t.getUTCFullYear())}},{dataField:"deleteButton",text:"",isDummyField:!0,editable:!1,searchable:!1,align:"right",style:{paddingRight:"1rem"},formatter:function(e,t){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(k,{onClick:function(){return function(e){T.push("/calculation/".concat(e,"/edit"))}(t._id)},className:"mr-3",children:Object(z.jsx)(He.a,{})}),Object(z.jsx)(k,{$delete:!0,onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&x(e),P(!0)}(t._id)},children:Object(z.jsx)(G.d,{})})]})}}];return Object(z.jsx)(z.Fragment,{children:v?Object(z.jsx)(ct,{}):Object(z.jsxs)(z.Fragment,{children:[I&&Object(z.jsxs)(ae.a,{variant:"danger",onClose:function(){return D(null)},className:"d-flex align-items-center",dismissible:!0,children:[Object(z.jsx)(xe.a,{className:"mr-2"}),I]}),Object(z.jsx)(pe,{$main:!0,children:Object(z.jsx)(qe.a,{keyField:"_id",bootstrap4:!0,data:c.calculations,columns:U,search:!0,children:function(e){return Object(z.jsxs)("div",{children:[Object(z.jsxs)("h4",{className:"mb-4",children:[c.firstName,"'s Calculations"]}),Object(z.jsx)("div",{className:"form-inline mb-3",children:Object(z.jsx)("div",{className:"form-group",children:Object(z.jsx)(A,Object(le.a)({className:"form-control-sm"},e.searchProps))})}),Object(z.jsx)(Ue.a,Object(le.a)(Object(le.a)({},e.baseProps),{},{bordered:!1,condensed:!0,noDataIndication:function(){return Object(z.jsxs)("div",{children:[Object(z.jsx)("h4",{className:"mt-4",children:e.searchProps.searchText?"No records found.":"You have no calculations."}),!e.searchProps.searchText&&Object(z.jsx)(O.Link,{to:"/",children:Object(z.jsx)("span",{className:"mt-3",children:"Create your first one."})}),Object(z.jsx)("img",{className:"mx-auto d-block my-4",src:Ft,width:"270",height:"270",alt:"Create a new calculation."})]})}}))]})}})}),Object(z.jsxs)(Ie,{show:S,onHide:M,children:[Object(z.jsx)(Ie.Header,{closeButton:!0,children:Object(z.jsx)(Ie.Title,{children:"Confirm deletion"})}),Object(z.jsx)(Ie.Body,{children:Object(z.jsx)("p",{children:"Are you sure you want to permanently delete this calculation?"})}),Object(z.jsxs)(Ie.Footer,{children:[Object(z.jsx)(y,{variant:"secondary",onClick:M,children:"Cancel"}),Object(z.jsx)(y,{variant:"danger",onClick:function(){L(),M()},children:"Delete"})]})]})]})})},It={email:"",password:""};var Dt,Tt=function(e){var t=Object(i.useState)(e.isResetPassword),n=Object(u.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(!1),s=Object(u.a)(r,2),o=s[0],l=s[1],d=Object(i.useState)(),m=Object(u.a)(d,2),p=m[0],x=m[1],f=Object(fe.m)().token,g=Object(fe.k)(),v=Object(i.useRef)(),w=a?oe.d({password:oe.e().required("Required"),confirmPassword:oe.e().test("passwords-match","Passwords must match",(function(e){return this.parent.password===e}))}):oe.d({email:oe.e().email("Invalid email address").required("Required")});function k(e){a?function(e){C.apply(this,arguments)}(e):function(e){N.apply(this,arguments)}(e)}function C(){return(C=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t,f);case 3:v.current.setSubmitting(!1),g.push("/reset/".concat(f,"/done")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(null===(n=e.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)&&x(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function N(){return(N=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t);case 3:v.current.setSubmitting(!1),g.push("/forgot/done"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(null===(n=e.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)&&x(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){c(e.isResetPassword)}),[e.isResetPassword]),Object(i.useEffect)((function(){-1!==window.location.href.indexOf("done")?l(!0):l(!1)}),[g.location]),ge("Receipt Hero - ".concat(a?"Reset":"Forgot"," Password")),Object(z.jsxs)(Oe,{children:[Object(z.jsx)(re.a.Body,{children:Object(z.jsx)("img",{className:"mx-auto d-block mb-3",src:h,width:"72",height:"72",alt:"logo"})}),p&&Object(z.jsxs)(ae.a,{variant:"danger",onClose:function(){return x(null)},className:"d-flex align-items-center",children:[Object(z.jsx)(xe.a,{className:"mr-2"}),p]}),Object(z.jsxs)(pe,{children:[o?Object(z.jsxs)("h3",{children:["Password Reset ",a?"Complete":"Sent"]}):Object(z.jsxs)("h3",{children:[a?"Reset":"Forgot"," Password"]}),Object(z.jsx)("hr",{}),!o&&!a&&Object(z.jsx)("p",{className:"small",children:"Please enter the email address associated with your account."}),o?a?Object(z.jsx)("p",{children:"Your password has been set."}):Object(z.jsx)("p",{children:"If your submission matches our records, a link will be sent to the provided email address with information on how to reset your password. The link will only be valid for 15 minutes."}):Object(z.jsx)(ie.b,{validationSchema:w,initialValues:It,onSubmit:function(e,t){t.setSubmitting;k(e)},innerRef:v,children:function(e){var t=e.handleSubmit,n=e.isSubmitting,c=e.errors,r=e.values;return Object(z.jsxs)(se.a,{noValidate:!0,onSubmit:t,children:[a?Object(z.jsxs)("div",{children:[Object(z.jsx)(je,{name:"password",label:"New password",type:"password",isValid:!c.confirmPassword&&r.password}),Object(z.jsx)(je,{name:"confirmPassword",label:"Confirm New Password",type:"password",className:"mb-3",isValid:!c.confirmPassword&&r.confirmPassword})]}):Object(z.jsx)(je,{name:"email",label:"Email"}),Object(z.jsx)(y,{$primary:!0,type:"submit",size:"lg",className:"mt-4",block:!0,disabled:n,children:n?"Loading...":a?"Update password":"Email me a recovery link"})]})}}),Object(z.jsx)(O.Link,{to:"/login",children:Object(z.jsx)(y,{variant:o?"success":"link",size:"lg",block:!0,className:o?"mt-4":"pb-0 mt-3",children:"Back to login"})})]})]})},Et=Object(x.c)(Dt||(Dt=Object(m.a)(["\n    html, body, #root, #root>div {\n      height: 100%;\n    }\n\n    body {\n      background-color: ",";\n      color: ",';\n      // font-family: "Montserrat", sans-serif;\n\n      // Makes text look sharper on the edges.\n      -webkit-font-smoothing: antialiased;\n\xa0\xa0\xa0\xa0  -moz-osx-font-smoothing: grayscale;\n    }\n\n    h1,h2,h3,h4,h5,h6,span {\n      font-family: "Montserrat";\n      font-weight: 500;\n    }\n\n    td, tr {\n      color: ',";\n      border-bottom: 1px solid "," !important;\n    }\n\n    th {\n      border-top-color: "," !important;\n      border-bottom-color: "," !important;\n    }\n\n    hr {\n      background-color: ","\n    }\n\n    input, textarea {\n      background-color: "," !important;\n      color: "," !important;\n    }\n\n    .as-text {\n      background:none;\n      border:none;\n      margin:0;\n      padding:0;\n      cursor: pointer;\n    }\n\n    .dropdown-menu {\n      background-color: ",";\n      box-shadow: 0 3px 3px rgba(0,0,0,0.2);\n    }\n\n    .dropdown-divider {\n      border-color: #aaa;\n    }\n\n    .dropdown-menu a {\n      color: ",";\n    }\n\n    .dropdown-toggle,\n    .dropdown-menu {\n      width: 100%;\n    }\n\n    .list-group-item {\n      border: 1px solid #aaa;\n    }\n\n    .nav.nav-pills .nav-link {\n      color: "," !important;\n    }\n\n    .nav.nav-pills .nav-link.active {\n      color: #fff !important;\n      background-color: "," !important;\n    }\n\n    /* Chrome, Safari, Edge, Opera - Removes increment button for number text input. */\n    input::-webkit-outer-spin-button,\n    input::-webkit-inner-spin-button {\n      -webkit-appearance: none;\n      margin: 0;\n    }\n\n    /* Firefox */\n    input[type=number] {\n      -moz-appearance: textfield;\n    }\n\n    /* Print settings */\n\n    @page {\n      margin: 10%;\n    }\n\n    @media all {\n      .pagebreak {\n        display: none;\n      }\n    }\n\n    @media print {\n      .pagebreak {\n        page-break-before: always;\n      }\n\n      /* Receipts table print settings */\n\n      .hide-on-print, #deleteButton {\n        display: none;\n        visibility: hidden;\n      }\n\n      h1,h2,h3,h4,h5,h6,p,td,tr,th {\n        color: black !important;\n      }\n    }\n"])),(function(e){return e.theme.background}),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.borderColor}),(function(e){return e.theme.borderColor}),(function(e){return e.theme.borderColor}),(function(e){return e.theme.borderColor}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.tabPane})),Mt={background:"#F4F3EF",text:"#2B2B2B",body:"white",navbar:"#5b5656",toggleButton:"outline-dark",emoji:"\ud83c\udf19",borderColor:"#d3d3d3",cellColorGreen:"#49a94e",cellColorOrange:"#FF5F1F",tabPane:"#9d9a9a"},Lt={background:"#1a1a1a",text:"#DDDDDD",body:"#313131",navbar:"#3A3B3C",toggleButton:"outline-light",emoji:"\u2600\ufe0f",borderColor:"#636465",cellColorGreen:"#39FF14",cellColorOrange:"#FFA500",tabPane:"#757677"},At=n(89);var Bt=function(){var e=function(){var e=Object(i.useState)("light"),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),r=Object(u.a)(c,2),s=r[0],o=r[1],l=function(e){window.localStorage.setItem("theme",e),a(e)};return Object(i.useEffect)((function(){var e=window.localStorage.getItem("theme");e&&a(e),o(!0)}),[]),[n,function(){l("light"===n?"dark":"light")},s]}(),t=Object(u.a)(e,3),n=t[0],a=t[1],c=t[2],r="light"===n?Mt:Lt,s=Object(i.useContext)(q),o=s.userObject,l=s.loadingUserObject;return c?Object(z.jsx)(z.Fragment,{children:l?Object(z.jsx)(he,{children:Object(z.jsx)("div",{style:{height:"100vh"},children:Object(z.jsx)(ct,{})})}):Object(z.jsx)(At.a,{avatarRedirectUrl:"https://avatar-redirect.appspot.com",children:Object(z.jsxs)(x.b,{theme:r,children:[Object(z.jsx)(Et,{}),Object(z.jsxs)(O.BrowserRouter,{children:[Object(z.jsx)(ne,{theme:n,toggleTheme:a}),Object(z.jsx)(he,{children:Object(z.jsxs)(fe.g,{children:[Object(z.jsx)(fe.d,{exact:!0,path:"/",component:rt}),Object(z.jsx)(fe.d,{path:"/login",children:o?Object(z.jsx)(fe.c,{to:"/"}):Object(z.jsx)(ye,{isSignUp:!1})}),Object(z.jsx)(fe.d,{path:"/signup",children:o?Object(z.jsx)(fe.c,{to:"/"}):Object(z.jsx)(ye,{isSignUp:!0})}),Object(z.jsx)(fe.d,{path:"/user/settings",children:o?Object(z.jsx)(Pt,{}):Object(z.jsx)(fe.c,{to:"/login"})}),Object(z.jsx)(fe.d,{path:"/user/:id",component:Rt}),Object(z.jsx)(fe.d,{path:"/calculation/edit/:id",component:rt}),Object(z.jsx)(fe.d,{path:"/calculation/:id",component:rt}),Object(z.jsx)(fe.d,{path:"/forgot",children:o?Object(z.jsx)(fe.c,{to:"/"}):Object(z.jsx)(Tt,{isResetPassword:!1})}),Object(z.jsx)(fe.d,{path:"/forgot/done",children:o?Object(z.jsx)(fe.c,{to:"/"}):Object(z.jsx)(Tt,{isResetPassword:!1})}),Object(z.jsx)(fe.d,{path:"/reset/:token",children:o?Object(z.jsx)(fe.c,{to:"/"}):Object(z.jsx)(Tt,{isResetPassword:!0})}),Object(z.jsx)(fe.d,{path:"/reset/:token/done",children:o?Object(z.jsx)(fe.c,{to:"/"}):Object(z.jsx)(Tt,{isResetPassword:!0})}),Object(z.jsx)(fe.d,{component:it})]})})]})]})})}):Object(z.jsx)("div",{})};l.a.render(Object(z.jsx)($,{children:Object(z.jsx)(Bt,{})}),document.getElementById("root"))}},[[537,1,2]]]);
//# sourceMappingURL=main.f0e26067.chunk.js.map